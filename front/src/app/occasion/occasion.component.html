@if (occasion$ | async; as o) {
  <h1 id="occasion">{{ o.titre }}</h1>
  @switch (o.estPassee) {
    @case (true) {
      <div class="alert alert-warning col-12" role="alert">
        Cette occasion est passée.
      </div>
    }
    @case (false) {
      <div
        id="dateRemiseCadeaux"
        class="alert alert-primary col-12"
        role="alert"
      >
        Date de remise des cadeaux : {{ o.date }}
      </div>
    }
  }
  @if (!o.tirageFait) {
    <div class="alert alert-warning col-12" role="alert">
      Le tirage au sort n'a pas
      @if (!o.estPassee) {
        encore
      }
      eu lieu.
    </div>
  }
  <!-- <h2>Participants</h2> -->
  <div>
    Cliquer sur le nom d'un des participants pour accéder à sa liste d'idées.
  </div>
  <div class="container">
    <div class="row justify-content-center">
      @for (p of o.participants; track p.id) {
        <div class="col-sm-6 col-md-4 col-lg-3 col-xl-2">
          <div
            class="card"
            [ngClass]="{
              'bg-primary': p.estQuiRecoitDeMoi,
              'bg-muted': p.estMoi,
              'bg-secondary': !p.estMoi && !p.estQuiRecoitDeMoi,
              'text-white': !p.estMoi,
              estMoi: p.estMoi,
              estQuiRecoitDeMoi: p.estQuiRecoitDeMoi,
            }"
            [routerLink]="['/idee']"
            [queryParams]="{ idUtilisateur: p.id }"
          >
            <div class="card-body">
              <h3 class="card-title">{{ p.nom }}</h3>
              @if (p.estMoi) {
                <div class="card-text">C'est vous !</div>
              }
              @if (p.estQuiRecoitDeMoi) {
                <div class="card-text">
                  C'est à
                  @switch (p.genre) {
                    @case (Genre.Feminin) {
                      elle
                    }
                    @case (Genre.Masculin) {
                      lui
                    }
                  }
                  que vous
                  @switch (o.estPassee) {
                    @case (true) {
                      avez fait
                    }
                    @case (false) {
                      ferez
                    }
                  }
                  un cadeau.
                </div>
              }
            </div>
          </div>
        </div>
      }
    </div>
  </div>
} @else {
  <h1 id="occasion">Veuillez patienter...</h1>
}
